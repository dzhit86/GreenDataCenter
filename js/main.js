"use strict";

$(document).ready(function () {
  changeGlassField($(window).width());
  $('.slider-top').slick({
    slidesToShow: 1,
    arrows: false,
    dots: true,
    dotsClass: "slider-top__dots",
    customPaging: function customPaging(slider, i) {
      return '';
    }
  });

  function changeGlassField(width) {
    var centerColumnField = $(".section-top__center");
    var sliderTopField = $(".section-top__slider");

    if (width > 1024) {
      centerColumnField.addClass("glass-field");
      sliderTopField.removeClass("glass-field");
    } else {
      sliderTopField.addClass("glass-field");
      centerColumnField.removeClass("glass-field");
    }
  }

  var menuMain = $(".header-menu");
  var btnBurger = $(".header__burger");
  btnBurger.on("click", mobileMenu);

  function mobileMenu(event) {
    event.preventDefault();
    btnBurger.add(menuMain).toggleClass("_active");
  }

  function closeMenu() {
    btnBurger.add(menuMain).removeClass("_active");
  }

  $(window).resize(function () {
    if ($(this).outerWidth() >= 1182) {
      closeMenu();
    }

    changeGlassField($(window).width());
  });
  $(window).on("scroll", function () {
    if ($(window).scrollTop() > $(window).height()) {
      $('.scroll-top').css("display", "flex");
    } else {
      $('.scroll-top').css("display", "none");
    }
  });
  $(document).mouseup(function (e) {
    if (!menuMain.is(e.target) && menuMain.has(e.target).length === 0 && !btnBurger.is(e.target) && btnBurger.has(e.target).length === 0) {
      closeMenu();
    }
  });
  $(function () {
    var smoothLink = $('a[data-smooth]');
    smoothLink.on('click', function (event) {
      event.preventDefault();
      var sc = $(this).attr("href");

      if ($(sc).length) {
        var pad = $(sc).outerHeight() - $(sc).height() - 100,
            dn = $(sc).offset().top + pad;
        $('html, body').animate({
          scrollTop: dn
        }, 1000);
      } else {
        alert('Нет такой секции!');
      }
    });
  });

  (function (window) {
    function classReg(className) {
      return new RegExp("(^|\\s+)" + className + "(\\s+|$)");
    }

    var hasClass, addClass, removeClass;

    if ('classList' in document.documentElement) {
      hasClass = function hasClass(elem, c) {
        return elem.classList.contains(c);
      };

      addClass = function addClass(elem, c) {
        elem.classList.add(c);
      };

      removeClass = function removeClass(elem, c) {
        elem.classList.remove(c);
      };
    } else {
      hasClass = function hasClass(elem, c) {
        return classReg(c).test(elem.className);
      };

      addClass = function addClass(elem, c) {
        if (!hasClass(elem, c)) {
          elem.className = elem.className + ' ' + c;
        }
      };

      removeClass = function removeClass(elem, c) {
        elem.className = elem.className.replace(classReg(c), ' ');
      };
    }

    function toggleClass(elem, c) {
      var fn = hasClass(elem, c) ? removeClass : addClass;
      fn(elem, c);
    }

    var classie = {
      hasClass: hasClass,
      addClass: addClass,
      removeClass: removeClass,
      toggleClass: toggleClass,
      has: hasClass,
      add: addClass,
      remove: removeClass,
      toggle: toggleClass
    };

    if (typeof define === 'function' && define.amd) {
      define(classie);
    } else {
      window.classie = classie;
    }
  })(window);

  (function () {
    if (!String.prototype.trim) {
      (function () {
        var rtrim = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;

        String.prototype.trim = function () {
          return this.replace(rtrim, '');
        };
      })();
    }

    [].slice.call(document.querySelectorAll('.form__field')).forEach(function (inputEl) {
      if (inputEl.value.trim() !== '') {
        classie.add(inputEl.parentNode, 'input--filled');
      } // events:


      inputEl.addEventListener('focus', onInputFocus);
      inputEl.addEventListener('blur', onInputBlur);
    });

    function onInputFocus(ev) {
      classie.add(ev.target.parentNode, 'input--filled');
    }

    function onInputBlur(ev) {
      if (ev.target.value.trim() === '') {
        classie.remove(ev.target.parentNode, 'input--filled');
      }
    }
  })();

  $('.section-top__topbg').parallax({
    posX: "center",
    posY: "center",
    src: "img/bg-header.webp",
    bleed: 50,
    speed: -.2
  });
  var show = true;
  var countbox = ".section-stat";
  $(window).on("scroll load resize", function () {
    if (!show) return false;
    var w_top = $(window).scrollTop();
    var e_top = $(countbox).offset().top;
    var w_height = $(window).height();
    var d_height = $(document).height();
    var e_height = $(countbox).outerHeight();

    if (w_top + 500 >= e_top || w_height + w_top == d_height || e_height + e_top < w_height) {
      $('.section-stat__value').css('opacity', '1');
      $('.section-stat__value').spincrement({
        thousandSeparator: "",
        duration: 4000
      });
      show = false;
    }
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiJCIsImRvY3VtZW50IiwicmVhZHkiLCJjaGFuZ2VHbGFzc0ZpZWxkIiwid2luZG93Iiwid2lkdGgiLCJzbGljayIsInNsaWRlc1RvU2hvdyIsImFycm93cyIsImRvdHMiLCJkb3RzQ2xhc3MiLCJjdXN0b21QYWdpbmciLCJzbGlkZXIiLCJpIiwiY2VudGVyQ29sdW1uRmllbGQiLCJzbGlkZXJUb3BGaWVsZCIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJtZW51TWFpbiIsImJ0bkJ1cmdlciIsIm9uIiwibW9iaWxlTWVudSIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJhZGQiLCJ0b2dnbGVDbGFzcyIsImNsb3NlTWVudSIsInJlc2l6ZSIsIm91dGVyV2lkdGgiLCJzY3JvbGxUb3AiLCJoZWlnaHQiLCJjc3MiLCJtb3VzZXVwIiwiZSIsImlzIiwidGFyZ2V0IiwiaGFzIiwibGVuZ3RoIiwic21vb3RoTGluayIsInNjIiwiYXR0ciIsInBhZCIsIm91dGVySGVpZ2h0IiwiZG4iLCJvZmZzZXQiLCJ0b3AiLCJhbmltYXRlIiwiYWxlcnQiLCJjbGFzc1JlZyIsImNsYXNzTmFtZSIsIlJlZ0V4cCIsImhhc0NsYXNzIiwiZG9jdW1lbnRFbGVtZW50IiwiZWxlbSIsImMiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInJlbW92ZSIsInRlc3QiLCJyZXBsYWNlIiwiZm4iLCJjbGFzc2llIiwidG9nZ2xlIiwiZGVmaW5lIiwiYW1kIiwiU3RyaW5nIiwicHJvdG90eXBlIiwidHJpbSIsInJ0cmltIiwic2xpY2UiLCJjYWxsIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJpbnB1dEVsIiwidmFsdWUiLCJwYXJlbnROb2RlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9uSW5wdXRGb2N1cyIsIm9uSW5wdXRCbHVyIiwiZXYiLCJwYXJhbGxheCIsInBvc1giLCJwb3NZIiwic3JjIiwiYmxlZWQiLCJzcGVlZCIsInNob3ciLCJjb3VudGJveCIsIndfdG9wIiwiZV90b3AiLCJ3X2hlaWdodCIsImRfaGVpZ2h0IiwiZV9oZWlnaHQiLCJzcGluY3JlbWVudCIsInRob3VzYW5kU2VwYXJhdG9yIiwiZHVyYXRpb24iXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBQSxDQUFDLENBQUNDLFFBQUQsQ0FBRCxDQUFZQyxLQUFaLENBQWtCLFlBQVc7QUFFM0JDLEVBQUFBLGdCQUFnQixDQUFDSCxDQUFDLENBQUNJLE1BQUQsQ0FBRCxDQUFVQyxLQUFWLEVBQUQsQ0FBaEI7QUFFQUwsRUFBQUEsQ0FBQyxDQUFDLGFBQUQsQ0FBRCxDQUFpQk0sS0FBakIsQ0FBdUI7QUFDbkJDLElBQUFBLFlBQVksRUFBRSxDQURLO0FBRW5CQyxJQUFBQSxNQUFNLEVBQUUsS0FGVztBQUduQkMsSUFBQUEsSUFBSSxFQUFFLElBSGE7QUFJbkJDLElBQUFBLFNBQVMsRUFBRSxrQkFKUTtBQUtuQkMsSUFBQUEsWUFBWSxFQUFHLHNCQUFTQyxNQUFULEVBQWlCQyxDQUFqQixFQUFvQjtBQUMvQixhQUFPLEVBQVA7QUFDSDtBQVBrQixHQUF2Qjs7QUFVQSxXQUFTVixnQkFBVCxDQUEwQkUsS0FBMUIsRUFBaUM7QUFDL0IsUUFBSVMsaUJBQWlCLEdBQUdkLENBQUMsQ0FBQyxzQkFBRCxDQUF6QjtBQUNBLFFBQUllLGNBQWMsR0FBR2YsQ0FBQyxDQUFDLHNCQUFELENBQXRCOztBQUNBLFFBQUlLLEtBQUssR0FBRyxJQUFaLEVBQWtCO0FBQ2hCUyxNQUFBQSxpQkFBaUIsQ0FBQ0UsUUFBbEIsQ0FBMkIsYUFBM0I7QUFDQUQsTUFBQUEsY0FBYyxDQUFDRSxXQUFmLENBQTJCLGFBQTNCO0FBQ0QsS0FIRCxNQUdPO0FBQ0xGLE1BQUFBLGNBQWMsQ0FBQ0MsUUFBZixDQUF3QixhQUF4QjtBQUNBRixNQUFBQSxpQkFBaUIsQ0FBQ0csV0FBbEIsQ0FBOEIsYUFBOUI7QUFDRDtBQUNGOztBQUVELE1BQU1DLFFBQVEsR0FBR2xCLENBQUMsQ0FBQyxjQUFELENBQWxCO0FBQ0EsTUFBTW1CLFNB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QUFDLHNCQUFELENBQUQsQ0FBMEIrQixHQUExQixDQUE4QixTQUE5QixFQUF5QyxHQUF6QztBQUNBL0IsTUFBQUEsQ0FBQyxDQUFDLHNCQUFELENBQUQsQ0FBMEI2RixXQUExQixDQUFzQztBQUNwQ0MsUUFBQUEsaUJBQWlCLEVBQUUsRUFEaUI7QUFFcENDLFFBQUFBLFFBQVEsRUFBRTtBQUYwQixPQUF0QztBQUlBVCxNQUFBQSxJQUFJLEdBQUcsS0FBUDtBQUNIO0FBQ0osR0FmRDtBQWdCRCxDQW5NRCIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xyXG5cclxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCl7XHJcblxyXG4gIGNoYW5nZUdsYXNzRmllbGQoJCh3aW5kb3cpLndpZHRoKCkpO1xyXG4gIFxyXG4gICQoJy5zbGlkZXItdG9wJykuc2xpY2soe1xyXG4gICAgICBzbGlkZXNUb1Nob3c6IDEsXHJcbiAgICAgIGFycm93czogZmFsc2UsXHJcbiAgICAgIGRvdHM6IHRydWUsXHJcbiAgICAgIGRvdHNDbGFzczogXCJzbGlkZXItdG9wX19kb3RzXCIsXHJcbiAgICAgIGN1c3RvbVBhZ2luZyA6IGZ1bmN0aW9uKHNsaWRlciwgaSkge1xyXG4gICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICB9LFxyXG4gIH0pO1xyXG5cclxuICBmdW5jdGlvbiBjaGFuZ2VHbGFzc0ZpZWxkKHdpZHRoKSB7XHJcbiAgICBsZXQgY2VudGVyQ29sdW1uRmllbGQgPSAkKFwiLnNlY3Rpb24tdG9wX19jZW50ZXJcIik7XHJcbiAgICBsZXQgc2xpZGVyVG9wRmllbGQgPSAkKFwiLnNlY3Rpb24tdG9wX19zbGlkZXJcIik7XHJcbiAgICBpZiAod2lkdGggPiAxMDI0KSB7XHJcbiAgICAgIGNlbnRlckNvbHVtbkZpZWxkLmFkZENsYXNzKFwiZ2xhc3MtZmllbGRcIik7XHJcbiAgICAgIHNsaWRlclRvcEZpZWxkLnJlbW92ZUNsYXNzKFwiZ2xhc3MtZmllbGRcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzbGlkZXJUb3BGaWVsZC5hZGRDbGFzcyhcImdsYXNzLWZpZWxkXCIpO1xyXG4gICAgICBjZW50ZXJDb2x1bW5GaWVsZC5yZW1vdmVDbGFzcyhcImdsYXNzLWZpZWxkXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29uc3QgbWVudU1haW4gPSAkKFwiLmhlYWRlci1tZW51XCIpO1xyXG4gIGNvbnN0IGJ0bkJ1cmdlciA9ICQoXCIuaGVhZGVyX19idXJnZXJcIik7XHJcblxyXG4gIGJ0bkJ1cmdlci5vbihcImNsaWNrXCIsIG1vYmlsZU1lbnUpO1xyXG5cclxuICBmdW5jdGlvbiBtb2JpbGVNZW51KGV2ZW50KSB7XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGJ0bkJ1cmdlci5hZGQobWVudU1haW4pLnRvZ2dsZUNsYXNzKFwiX2FjdGl2ZVwiKTtcclxuICB9XHJcbiAgZnVuY3Rpb24gY2xvc2VNZW51KCkge1xyXG4gICAgICBidG5CdXJnZXIuYWRkKG1lbnVNYWluKS5yZW1vdmVDbGFzcyhcIl9hY3RpdmVcIik7XHJcbiAgfVxyXG5cclxuICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uICgpIHsgXHJcbiAgICAgIGlmICgkKHRoaXMpLm91dGVyV2lkdGgoKSA+PSAxMTgyKSB7XHJcbiAgICAgICAgICBjbG9zZU1lbnUoKTtcclxuICAgICAgfVxyXG4gICAgICBjaGFuZ2VHbGFzc0ZpZWxkKCQod2luZG93KS53aWR0aCgpKTtcclxuICB9KTtcclxuXHJcbiAgJCh3aW5kb3cpLm9uKFwic2Nyb2xsXCIsIGZ1bmN0aW9uKCl7XHJcbiAgICBpZiAoJCh3aW5kb3cpLnNjcm9sbFRvcCgpID4gJCh3aW5kb3cpLmhlaWdodCgpKSB7XHJcbiAgICAgICQoJy5zY3JvbGwtdG9wJykuY3NzKFwiZGlzcGxheVwiLCBcImZsZXhcIik7IFxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgJCgnLnNjcm9sbC10b3AnKS5jc3MoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgJChkb2N1bWVudCkubW91c2V1cChmdW5jdGlvbiAoZSkge1xyXG4gICAgICBpZiAoIW1lbnVNYWluLmlzKGUudGFyZ2V0KVxyXG4gICAgICAgICAgJiYgbWVudU1haW4uaGFzKGUudGFyZ2V0KS5sZW5ndGggPT09IDBcclxuICAgICAgICAgICYmICFidG5CdXJnZXIuaXMoZS50YXJnZXQpXHJcbiAgICAgICAgICAmJiBidG5CdXJnZXIuaGFzKGUudGFyZ2V0KS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICBjbG9zZU1lbnUoKTtcclxuICAgICAgfVxyXG4gIH0pO1xyXG4gIFxyXG5cclxuXHQkKGZ1bmN0aW9uICgpIHtcclxuXHRcdGxldCBzbW9vdGhMaW5rID0gJCgnYVtkYXRhLXNtb290aF0nKTtcclxuXHRcdHNtb290aExpbmsub24oJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdGxldCBzYyA9ICQodGhpcykuYXR0cihcImhyZWZcIik7XHJcblx0XHRcdGlmICgkKHNjKS5sZW5ndGgpIHtcclxuXHRcdFx0XHRsZXQgcGFkID0gJChzYykub3V0ZXJIZWlnaHQoKSAtICQoc2MpLmhlaWdodCgpIC0gMTAwLFxyXG5cdFx0XHRcdFx0ZG4gPSAkKHNjKS5vZmZzZXQoKS50b3AgKyBwYWQ7XHJcblx0XHRcdFx0JCgnaHRtbCwgYm9keScpLmFuaW1hdGUoeyBzY3JvbGxUb3A6IGRuIH0sIDEwMDApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGFsZXJ0KCfQndC10YIg0YLQsNC60L7QuSDRgdC10LrRhtC40LghJyk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH0pO1xyXG5cclxuXHJcblxyXG4gICggZnVuY3Rpb24oIHdpbmRvdyApIHsgICAgXHJcbiAgICAgIGZ1bmN0aW9uIGNsYXNzUmVnKCBjbGFzc05hbWUgKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoXCIoXnxcXFxccyspXCIgKyBjbGFzc05hbWUgKyBcIihcXFxccyt8JClcIik7XHJcbiAgICAgIH1cclxuICAgICAgdmFyIGhhc0NsYXNzLCBhZGRDbGFzcywgcmVtb3ZlQ2xhc3M7XHJcbiAgICAgIFxyXG4gICAgICBpZiAoICdjbGFzc0xpc3QnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCApIHtcclxuICAgICAgICBoYXNDbGFzcyA9IGZ1bmN0aW9uKCBlbGVtLCBjICkge1xyXG4gICAgICAgICAgcmV0dXJuIGVsZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCBjICk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBhZGRDbGFzcyA9IGZ1bmN0aW9uKCBlbGVtLCBjICkge1xyXG4gICAgICAgICAgZWxlbS5jbGFzc0xpc3QuYWRkKCBjICk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZW1vdmVDbGFzcyA9IGZ1bmN0aW9uKCBlbGVtLCBjICkge1xyXG4gICAgICAgICAgZWxlbS5jbGFzc0xpc3QucmVtb3ZlKCBjICk7XHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBoYXNDbGFzcyA9IGZ1bmN0aW9uKCBlbGVtLCBjICkge1xyXG4gICAgICAgICAgcmV0dXJuIGNsYXNzUmVnKCBjICkudGVzdCggZWxlbS5jbGFzc05hbWUgKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGFkZENsYXNzID0gZnVuY3Rpb24oIGVsZW0sIGMgKSB7XHJcbiAgICAgICAgICBpZiAoICFoYXNDbGFzcyggZWxlbSwgYyApICkge1xyXG4gICAgICAgICAgICBlbGVtLmNsYXNzTmFtZSA9IGVsZW0uY2xhc3NOYW1lICsgJyAnICsgYztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHJlbW92ZUNsYXNzID0gZnVuY3Rpb24oIGVsZW0sIGMgKSB7XHJcbiAgICAgICAgICBlbGVtLmNsYXNzTmFtZSA9IGVsZW0uY2xhc3NOYW1lLnJlcGxhY2UoIGNsYXNzUmVnKCBjICksICcgJyApO1xyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGZ1bmN0aW9uIHRvZ2dsZUNsYXNzKCBlbGVtLCBjICkge1xyXG4gICAgICAgIHZhciBmbiA9IGhhc0NsYXNzKCBlbGVtLCBjICkgPyByZW1vdmVDbGFzcyA6IGFkZENsYXNzO1xyXG4gICAgICAgIGZuKCBlbGVtLCBjICk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIHZhciBjbGFzc2llID0ge1xyXG4gICAgICAgIGhhc0NsYXNzOiBoYXNDbGFzcyxcclxuICAgICAgICBhZGRDbGFzczogYWRkQ2xhc3MsXHJcbiAgICAgICAgcmVtb3ZlQ2xhc3M6IHJlbW92ZUNsYXNzLFxyXG4gICAgICAgIHRvZ2dsZUNsYXNzOiB0b2dnbGVDbGFzcyxcclxuICAgICAgICBoYXM6IGhhc0NsYXNzLFxyXG4gICAgICAgIGFkZDogYWRkQ2xhc3MsXHJcbiAgICAgICAgcmVtb3ZlOiByZW1vdmVDbGFzcyxcclxuICAgICAgICB0b2dnbGU6IHRvZ2dsZUNsYXNzXHJcbiAgICAgIH07XHJcbiAgIFxyXG4gICAgICBpZiAoIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCApIHtcclxuICAgICAgICBkZWZpbmUoIGNsYXNzaWUgKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB3aW5kb3cuY2xhc3NpZSA9IGNsYXNzaWU7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgfSkoIHdpbmRvdyApO1xyXG4gICAgICBcclxuICBcclxuICAoZnVuY3Rpb24oKSB7XHJcbiAgICAgIGlmICghU3RyaW5nLnByb3RvdHlwZS50cmltKSB7XHJcbiAgICAgICAgICAoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgdmFyIHJ0cmltID0gL15bXFxzXFx1RkVGRlxceEEwXSt8W1xcc1xcdUZFRkZcXHhBMF0rJC9nO1xyXG4gICAgICAgICAgICAgIFN0cmluZy5wcm90b3R5cGUudHJpbSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZXBsYWNlKHJ0cmltLCAnJyk7XHJcbiAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgIH0pKCk7XHJcbiAgICAgIH1cclxuICBcclxuICAgICAgW10uc2xpY2UuY2FsbCggZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCggJy5mb3JtX19maWVsZCcgKSApLmZvckVhY2goIGZ1bmN0aW9uKCBpbnB1dEVsICkge1xyXG4gICAgICAgICAgaWYoIGlucHV0RWwudmFsdWUudHJpbSgpICE9PSAnJyApIHtcclxuICAgICAgICAgICAgICBjbGFzc2llLmFkZCggaW5wdXRFbC5wYXJlbnROb2RlLCAnaW5wdXQtLWZpbGxlZCcgKTtcclxuICAgICAgICAgIH1cclxuICBcclxuICAgICAgICAgIC8vIGV2ZW50czpcclxuICAgICAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lciggJ2ZvY3VzJywgb25JbnB1dEZvY3VzICk7XHJcbiAgICAgICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoICdibHVyJywgb25JbnB1dEJsdXIgKTtcclxuICAgICAgfSApO1xyXG4gIFxyXG4gICAgICBmdW5jdGlvbiBvbklucHV0Rm9jdXMoIGV2ICkge1xyXG4gICAgICAgICAgY2xhc3NpZS5hZGQoIGV2LnRhcmdldC5wYXJlbnROb2RlLCAnaW5wdXQtLWZpbGxlZCcgKTtcclxuICAgICAgfVxyXG4gIFxyXG4gICAgICBmdW5jdGlvbiBvbklucHV0Qmx1ciggZXYgKSB7XHJcbiAgICAgICAgICBpZiggZXYudGFyZ2V0LnZhbHVlLnRyaW0oKSA9PT0gJycgKSB7XHJcbiAgICAgICAgICAgICAgY2xhc3NpZS5yZW1vdmUoIGV2LnRhcmdldC5wYXJlbnROb2RlLCAnaW5wdXQtLWZpbGxlZCcgKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfVxyXG4gIH0pKCk7XHJcblxyXG4gICQoJy5zZWN0aW9uLXRvcF9fdG9wYmcnKS5wYXJhbGxheCh7XHJcbiAgICBwb3NYIDogXCJjZW50ZXJcIixcclxuICAgIHBvc1kgOiBcImNlbnRlclwiLFxyXG4gICAgc3JjIDogXCJpbWcvYmctaGVhZGVyLndlYnBcIixcclxuICAgIGJsZWVkOiA1MCxcclxuICAgIHNwZWVkOiAtLjIsXHJcbiAgfSk7XHJcblxyXG5cclxuICBsZXQgc2hvdyA9IHRydWU7XHJcbiAgbGV0IGNvdW50Ym94ID0gXCIuc2VjdGlvbi1zdGF0XCI7XHJcbiAgJCh3aW5kb3cpLm9uKFwic2Nyb2xsIGxvYWQgcmVzaXplXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgaWYgKCFzaG93KSByZXR1cm4gZmFsc2U7XHJcbiAgICAgIGxldCB3X3RvcCA9ICQod2luZG93KS5zY3JvbGxUb3AoKTtcclxuICAgICAgbGV0IGVfdG9wID0gJChjb3VudGJveCkub2Zmc2V0KCkudG9wO1xyXG4gICAgICBsZXQgd19oZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCk7XHJcbiAgICAgIGxldCBkX2hlaWdodCA9ICQoZG9jdW1lbnQpLmhlaWdodCgpO1xyXG4gICAgICBsZXQgZV9oZWlnaHQgPSAkKGNvdW50Ym94KS5vdXRlckhlaWdodCgpO1xyXG4gICAgICBpZiAod190b3AgKyA1MDAgPj0gZV90b3AgfHwgd19oZWlnaHQgKyB3X3RvcCA9PSBkX2hlaWdodCB8fCBlX2hlaWdodCArIGVfdG9wIDwgd19oZWlnaHQpIHtcclxuICAgICAgICAgICQoJy5zZWN0aW9uLXN0YXRfX3ZhbHVlJykuY3NzKCdvcGFjaXR5JywgJzEnKTtcclxuICAgICAgICAgICQoJy5zZWN0aW9uLXN0YXRfX3ZhbHVlJykuc3BpbmNyZW1lbnQoe1xyXG4gICAgICAgICAgICB0aG91c2FuZFNlcGFyYXRvcjogXCJcIixcclxuICAgICAgICAgICAgZHVyYXRpb246IDQwMDBcclxuICAgICAgICAgIH0pOyAgICAgICAgIFxyXG4gICAgICAgICAgc2hvdyA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgfSk7XHJcbn0pO1xyXG5cclxuXHJcblxyXG5cclxuIl0sImZpbGUiOiJtYWluLmpzIn0=